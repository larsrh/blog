<!DOCTYPE html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="author" content="Stefan Tilkov">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="canonical" href="https://www.innoq.comhttps://www.innoq.com/blog/st/2007/11/poking-at-roa/">
  <link href="/blog/st/favicon.png" rel="icon">
  <link href="/blog/st/atom.xml" rel="alternate" title="Stefan Tilkov's Blog" type="application/atom+xml">


  <link rel="stylesheet" href="https://bootstrap.assets.innoq.com/css/0.0.9/innoq-bootstrap-theme.css" />
  <link rel="stylesheet" href="/blog/st/stylesheets/blog.css" />

  <title>Poking at ROA [Stefan Tilkov’s Blog]</title>
  
</head>


  <body>

    <nav class="navbar navbar-expand-lg navbar-light">
  <a class="navbar-brand m-2 p-2" href="https://www.innoq.com/"><img alt="INNOQ logo" height="40" src="https://innoq.style/assets/innoq-logo--whitered.svg" /></a>
  <a class="navbar-brand text-light" href="/blog/st/">Stefan Tilkov’s Blog Archive</a>
</nav>





    <main class="container">
      <p class="mt-5"><em>
	This is a single archived entry from Stefan Tilkov’s blog. For more up-to-date content,
	check out my <a href="https://www.innoq.com/en/staff/stefan-tilkov/">author page at INNOQ</a>,
	which has more information about me and also contains a list of published talks, podcasts, and articles.
	Or you can check out the <a href="/blog/st/">full archive</a>.

      </em></p>
      <article>
	<header>
          <h1>Poking at ROA</h1>
	  <p><small><a href="https://www.innoq.com/en/staff/stefan-tilkov/">Stefan Tilkov</a>, <time datetime="2017-06-26">Nov 13, 2007</time></small><p>
	</header>
	<section>
	  <p><a href="/blog/st/2007/10/28/batch.html">A while ago</a>, I criticized GData&#8217;s batch mode:</p>

<blockquote>
<p>Anytime you find yourself adding words like “operation” to your representation, you’ve violated one of the core RESTful HTTP principles, which is that the intent should be communicated using the HTTP verb.</p>
</blockquote>

<p><a href="http://appside.blogspot.com/2007/10/poking-at-roa.html">Erik Johnson</a> wrote up a reply on his blog:</p>

<blockquote>
<p>I’m a big fan of ROA, but I’m worried that ROA fundamentalism will create a quagmire (shared by SOA) where all advice seems to be about what <em>not</em> to do. ROA makes it easy to bind the HTTP verb with your intent, but it doesn’t require you to do so. If I define a format for a message that can contain multiple “intentions” and then expose POST endpoint for processing messages, have I broken some Law of ROA? I don’t think so.<br /></p>
</blockquote>

<p>I think Erik is right in that we should maybe focus more on what to do instead of what not to do. But first, let me explain my problem with the GData approach in more detail: One of the constraints of REST is the uniform interface, and HTTP mainly implements this constraint with its four common verbs - GET, PUT, POST, DELETE. Each of these have meaning beyond &#8220;move bytes from here to there&#8221;: A GET is safe and idempotent, PUT and DELETE are idempotent, there are no guarantees about POST. What I don&#8217;t like about the GData batch approach is that it uses POST to send a request body that contains sections with &#8220;operation=&#8217;delete&#8217;&#8221;, &#8220;operation=&#8217;insert&#8217;&#8221; and so on &#8212; i.e., it mixes up the meaning of the verbs with an overridden meaning in the content. </p>

<p>I would like an approach much better that used DELETE, PUT and POST to update a collection resource, possibly with some query string added, to achieve the same, i.e. in some pseudo-syntax (I&#8217;m too lazy to lookup GData query format):</p>

<pre><code>PUT /entries?month=June

&lt;entries&gt; ... &lt;/entries&gt;
</code></pre>

<p>(with DELETE working the same way), and a POST to the collection root (e.g. entries) to add a number of entries in one step. (Of course this is pretty simplified &#8212; there are still a lot of issues left to resolve, such as the correct response and response codes.)</p>

<p>This way, it would no longer be possible to insert, delete and update a lot of entries in a single step &#8212; you&#8217;d have to make it three steps, which doesn&#8217;t seem a big deal from my point of view, and would ensure that you could do the DELETEs and PUTs idempotently.</p>

<p>But I haven&#8217;t tried this out, so in the end it may turn out that Erik is right &#8212; the use of POST yields no guarantees, so maybe (at least in this particular respect) the GData approach might be the more pragmatic choice (and not as bad as I initially thought).</p>

<section class="comments">



<div class="comment" id="comment-1520">
On <a href="#comment-1520" title="Permalink to this comment">November 13, 2007  2:51 PM</a>, <a href="http://eikonne.wordpress.com" title="http://eikonne.wordpress.com" rel="nofollow">Ebenezer Ikonne</a>
said:
<p>&#8220;you’d have to make it three steps, which doesn’t seem a big deal from my point of view, and would ensure that you could do the DELETEs and PUTs idempotently.&#8221;</p>

<p>If you can convince the &#8220;client&#8221; that they have to invoke your service 3 times then it isn&#8217;t a big deal.  But how many integrators care about the purity of REST to buy that they couldn&#8217;t just POST all they want done? :)  Half the battle is building the service RESTfully, the other half is getting people to consume it the way YOU (or me) believe it should be consumed.</p>


</section>

	</section>
      </article>
    </main>

  </body>
</html>


