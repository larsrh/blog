<!DOCTYPE html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="author" content="Stefan Tilkov">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="canonical" href="https://www.innoq.comhttps://www.innoq.com/blog/st/2010/04/clojure-performance-guarantees/">
  <link href="/blog/st/favicon.png" rel="icon">
  <link href="/blog/st/atom.xml" rel="alternate" title="Stefan Tilkov's Blog" type="application/atom+xml">


  <link rel="stylesheet" href="https://bootstrap.assets.innoq.com/css/0.0.9/innoq-bootstrap-theme.css" />
  <link rel="stylesheet" href="/blog/st/stylesheets/blog.css" />

  <title>Clojure Performance Guarantees [Stefan Tilkov’s Blog]</title>
  
</head>


  <body>

    <nav class="navbar navbar-expand-lg navbar-light">
  <a class="navbar-brand m-2 p-2" href="https://www.innoq.com/"><img alt="INNOQ logo" height="40" src="https://innoq.style/assets/innoq-logo--whitered.svg" /></a>
  <a class="navbar-brand text-light" href="/blog/st/">Stefan Tilkov’s Blog Archive</a>
</nav>





    <main class="container">
      <p class="mt-5"><em>
	This is a single archived entry from Stefan Tilkov’s blog. For more up-to-date content,
	check out my <a href="https://www.innoq.com/en/staff/stefan-tilkov/">author page at INNOQ</a>,
	which has more information about me and also contains a list of published talks, podcasts, and articles.
	Or you can check out the <a href="/blog/st/">full archive</a>.

      </em></p>
      <article>
	<header>
          <h1>Clojure Performance Guarantees</h1>
	  <p><small><a href="https://www.innoq.com/en/staff/stefan-tilkov/">Stefan Tilkov</a>, <time datetime="2017-06-26">Apr 28, 2010</time></small><p>
	</header>
	<section>
	  <p>Jarkko Oranen a.k.a. Chousuke posted an excellent table summarizing the performance characteristics of functions operating on different Clojure data structures:</p>

<p><style type="text/css">
table.perf {
border-width: 1px;
border-spacing: ;
border-style: outset;
border-color: gray;
border-collapse: collapse;
}
table.perf th {
border-width: 1px;
padding: 5px;
border-style: dotted;
-moz-border-radius: ;
}
table.perf td {
border-width: 1px;
padding: 5px;
border-style: dotted;
border-color: gray;
}</p>

<p></style></p>

<table class="perf">
<tr><th></th><th>hash-map</th><th>sorted-map</th><th>hash-set</th><th>sorted-set</th><th>vector</th><th>queue</th><th>list</th><th>lazy seq</th></tr>
<tr><td>conj</td><td>near-constant</td><td>logarithmic</td><td>near-constant</td><td>logarithmic</td><td>constant (tail)</td><td>constant (tail)</td><td>constant (head)</td><td>constant (head)</td></tr>
<tr><td>assoc</td><td>near-constant</td><td>logarithmic</td><td>-</td><td>-</td><td>near-constant</td><td>-</td><td>-</td><td>-</td></tr>
<tr><td>dissoc</td><td>near-constant</td><td>logarithmic</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td></tr>
<tr><td>disj</td><td>-</td><td>-</td><td>near-constant</td><td>logarithmic</td><td>-</td><td>-</td><td>-</td><td>-</td></tr>
<tr><td>nth</td><td>-</td><td>-</td><td>-</td><td>-</td><td>near-constant</td><td>linear</td><td>linear</td><td>linear</td></tr>
<tr><td>get</td><td>near-constant</td><td>logarithmic</td><td>near-constant</td><td>logarithmic</td><td>near-constant</td><td>-</td><td>-</td><td>-</td></tr>
<tr><td>pop</td><td>-</td><td>-</td><td>-</td><td>-</td><td>constant (tail)</td><td>constant (head)</td><td>constant (head)</td><td>constant (head)</td></tr>
<tr><td>peek</td><td>-</td><td>-</td><td>-</td><td>-</td><td>constant (tail)</td><td>constant (head)</td><td>constant (head)</td><td>constant (head)</td></tr>
<tr><td>count</td><td>constant</td><td>constant</td><td>constant</td><td>constant</td><td>constant</td><td>constant</td><td>constant</td><td>linear</td></tr>
</table>

<p>He also provided an explanation of the terminology used; I've expanded it a little for the big-O-challenged (such as me):</p>

<ul>
<li><em>constant</em> means O(1) complexity, in other words, the time required for the operation is constant and independent of the number of elements contained in the collection. If you think of s simple linked list, you can imagine that adding something to its front always involves the same number of steps, regardless of the number of elements. This is the fastest you can hope for.</li>
<li><em>linear</em> is the slowest that can happen (in the Clojure libs, that is): This is O(n) complexity, meaning that the time required for applying this function on a list with 1000 elements will take a 100 times as long as applying it to a list of 10. In other words: this is slow.</li>
<li><em>logarithmic</em> means that the time required requires log n hops, which is pretty fast (e.g. doing this operation on a list of 1,000,000 items takes 6 times as long as doing it on a list with 10)</li>
<li><em>near-constant</em> performance characteristics refer to the places where the underlying tree structure for most (all?) of Clojure's collections shows its benefits: The number of hops required (as Rich puts it) is log32 n. (Update: I've erased the naïve explanation I had here, will follow up with a better one soon.)</li>
<li>Some operations are, of course <em>not supported</em> on some structures.</li>
</ul>

<p>On a related note, the Clojure IRC channel is simply great.</p>

<section class="comments">



<div class="comment" id="comment-2122">
On <a href="#comment-2122" title="Permalink to this comment">May  3, 2010  3:57 PM</a>, Matt R.
said:
<p>Any chance you&#8217;d consider switching from English terms to big-O notation?  The big-O notation is easier to identify.</p>


<div class="comment" id="comment-2123">
On <a href="#comment-2123" title="Permalink to this comment">May  4, 2010  5:37 AM</a>, Anonymous
said:
<p>Minor: s/list/map/g (logarithmic paragraph).
Reason: there are no logarithmic operations on lists.</p>


</section>

	</section>
      </article>
    </main>

  </body>
</html>


