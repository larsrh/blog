<!DOCTYPE html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="author" content="Stefan Tilkov">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="canonical" href="https://www.innoq.comhttps://www.innoq.com/blog/st/2012/02/patching-rails/">
  <link href="/blog/st/favicon.png" rel="icon">
  <link href="/blog/st/atom.xml" rel="alternate" title="Stefan Tilkov's Blog" type="application/atom+xml">


  <link rel="stylesheet" href="https://bootstrap.assets.innoq.com/css/0.0.9/innoq-bootstrap-theme.css" />
  <link rel="stylesheet" href="/blog/st/stylesheets/blog.css" />

  <title>PATCHing Rails [Stefan Tilkov’s Blog]</title>
  
</head>


  <body>

    <nav class="navbar navbar-expand-lg navbar-light">
  <a class="navbar-brand m-2 p-2" href="https://www.innoq.com/"><img alt="INNOQ logo" height="40" src="https://innoq.style/assets/innoq-logo--whitered.svg" /></a>
  <a class="navbar-brand text-light" href="/blog/st/">Stefan Tilkov’s Blog Archive</a>
</nav>





    <main class="container">
      <p class="mt-5"><em>
	This is a single archived entry from Stefan Tilkov’s blog. For more up-to-date content,
	check out my <a href="https://www.innoq.com/en/staff/stefan-tilkov/">author page at INNOQ</a>,
	which has more information about me and also contains a list of published talks, podcasts, and articles.
	Or you can check out the <a href="/blog/st/">full archive</a>.

      </em></p>
      <article>
	<header>
          <h1>PATCHing Rails</h1>
	  <p><small><a href="https://www.innoq.com/en/staff/stefan-tilkov/">Stefan Tilkov</a>, <time datetime="2017-06-26">Feb 26, 2012</time></small><p>
	</header>
	<section>
	  <p>As mentioned on the Ruby on Rails weblog, Rails 4.0 will include
(optional) support for <a href='http://weblog.rubyonrails.org/2012/2/26/edge-rails-patch-is-the-new-primary-http-method-for-updates'>partial updates via PATCH</a>, a change included to better comply to the HTTP spec and the REST architectural style. As you can guess, I really like
this motivation, even though I think it&rsquo;s insufficient to justify
major changes &ndash; being &ldquo;RESTful&rdquo; should not be the goal, building a
better system should be. It seems the Rails team has found a good way
to do this, as the change is made in a backwards-compatible fashion
(so if you don&rsquo;t care, you can simply ignore it). But it highlights
one of the things I really, really like about Rails: It tries to make
it a lot easier to build something that&rsquo;s RESTful than something that
isn&rsquo;t, and its reach means many more people will be exposed to this
as the way it&rsquo;s being done.</p>

<p>So what about the change itself? When should you use PUT, POST, PATCH?
First of all, these are the truths I base my views on:</p>

<ul>
<li>POST can mean anything; its most common use is to create something
under a location determined by the server; it&rsquo;s neither safe nor
idempotent nor cachable; it should be used whenever using any of the
other methods violates one of their guarantees.</li>
<li>PUT can mean creation or update; it affects the resource to which it
is applied; it&rsquo;s idempotent; it contains a full representation of
the resource (as far as the client is responsible for it). Most
importantly, by using PUT the client asks the server to <em>store</em> (in
the widest possible sense) the representation under the location
provided.</li>
<li>PATCH, a relatively new verb (at least in it&rsquo;s <a
href='http://tools.ietf.org/html/rfc5789'>standardized form</a>) is
intended to address partial updates, i.e. it updates only parts of
the resource it&rsquo;s being applied to; it&rsquo;s not idempotent; the client
asks the server to change parts of a resource.
<br /></li>
</ul>

<p>If you&rsquo;re a server developer and want to enable your clients to update
only parts of a resource &ndash; say, a customer&rsquo;s address &ndash;, you basically have three options:</p>

<ul>
<li>POST the new address to the resource and have the server decide what
to do &ndash; in this case, process the address change only &ndash; based on
the content</li>
<li>Expose each part you want to be changeable individually as a
resource in its own right and use PUT, i.e. make address a resource
http://&hellip;/customer/:id/address that you can PUT to</li>
<li>Use PATCH to put information about the intended change to the
resource itself, using an appropriate format understood by the
server
<br /></li>
</ul>

<p>Using POST is OK, but only because it essentially means nothing. The
PUT option is perfectly fine, but requires you to explicitly create
resources for this purpose. This is actually the best option in many
cases, especially if the resources you create in the process turn out
to be meaningful in their own right, support other methods (GET in
particular). It often ends up feeling a bit contrived, though, so it&rsquo;s
nice to have the third option: Using PATCH means you are being very
clear about the purpose of the request, and don&rsquo;t need to create new
and possibly otherwise unnecessary resources. It&rsquo;s still fully RESTful
because PATCH is an extremely generic method.</p>

<p>Note that while using POST for partial updates is OK, using PUT (as
Rails does) is not, because it violates the behavior as defined by the
spec. So changing it is a very good idea, and the only two options are POST
and PATCH.</p>

<p>Even though PATCH is clearly useful, and has <a href='http://roy.gbiv.com/untangled/2009/it-is-okay-to-use-post#comment-965'>the ultimate REST authority&rsquo;s blessing</a>, my recommendation in the past has been to avoid it because you can&rsquo;t count on anyone (or anything)
supporting it, and go with PUT or POST instead. With Rails&rsquo; influence,
I see this changing &ndash; and I very much look forward to being able to
include PATCH in my RESTful designs in the future. Add PATCH (in
addition to PUT and DELETE) to HTML 5, and I&rsquo;ll be more than happy &hellip;</p>

	</section>
      </article>
    </main>

  </body>
</html>


